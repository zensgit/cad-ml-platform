# å®žæ–½å¯¹æ¯”ä¸Žä¿®æ­£è¯´æ˜Ž

**æ—¥æœŸ**: 2025-11-19
**ç‰ˆæœ¬**: 3.0.1

---

## ðŸ“‹ å®žé™…å®žæ–½ vs åˆå§‹æ€»ç»“å¯¹æ¯”

### âœ… å·²ä¿®æ­£çš„é—®é¢˜

| é¡¹ç›® | åˆå§‹æè¿° | å®žé™…æƒ…å†µ | ä¿®æ­£æŽªæ–½ |
|------|----------|----------|----------|
| **Workflow ä½ç½®** | é”™è¯¯æåˆ°ä½äºŽæ ¹ç›®å½• | å®žé™…åœ¨ `.github/workflows/` | æ–‡æ¡£å·²ç¡®è®¤æ­£ç¡®ä½ç½® |
| **ä¿ç•™ç­–ç•¥å±‚çº§** | Makefile æ³¨é‡Šä¸å¤Ÿè¯¦ç»† | 5å±‚ç­–ç•¥æœªå……åˆ†è¯´æ˜Ž | å·²æ›´æ–° Makefile æ³¨é‡Šä¸ºå®Œæ•´5å±‚æè¿° |
| **ç‰ˆæœ¬å…¼å®¹æ€§** | æœªæ˜Žç¡®è¯´æ˜Ž | Chart.js ç­‰ä¾èµ–éœ€é”å®šç‰ˆæœ¬ | å·²æ·»åŠ ç‰ˆæœ¬å…¼å®¹æ€§ç« èŠ‚ |
| **ç­–ç•¥ç»†èŠ‚** | æ–‡æ¡£ä¸­ä»…åˆ—å‡ºå±‚çº§åç§° | ç¼ºå°‘é€‰æ‹©ç®—æ³•å’Œé…ç½®ç¤ºä¾‹ | å·²æ·»åŠ è¯¦ç»†è¡¨æ ¼å’Œä»£ç ç¤ºä¾‹ |

---

## ðŸ“Š å®Œæ•´åŠŸèƒ½å¯¹ç…§è¡¨

### æ–‡ä»¶ç³»ç»Ÿå®žé™…ç»“æž„

```
cad-ml-platform/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ ci.yml                     # åŽŸæœ‰ CI é…ç½®
â”‚       â””â”€â”€ evaluation-report.yml      # âœ… æ­£ç¡®ä½ç½®ï¼ˆ7889 å­—èŠ‚ï¼‰
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ evaluate_vision_ocr_combined.py    # 595 è¡Œï¼Œæ ¸å¿ƒè¯„ä¼°
â”‚   â”œâ”€â”€ generate_eval_report.py            # 550 è¡Œï¼Œv1 æŠ¥å‘Š
â”‚   â”œâ”€â”€ generate_eval_report_v2.py         # 700+ è¡Œï¼Œv2 äº¤äº’å¼
â”‚   â”œâ”€â”€ manage_eval_retention.py           # 400+ è¡Œï¼Œ5å±‚ä¿ç•™
â”‚   â”œâ”€â”€ notify_eval_results.py             # 500+ è¡Œï¼Œå¤šæ¸ é“é€šçŸ¥
â”‚   â””â”€â”€ validate_eval_history.py           # 240 è¡Œï¼Œschema éªŒè¯
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ EVAL_SYSTEM_COMPLETE_GUIDE.md      # 600+ è¡Œï¼Œå®Œæ•´æŒ‡å—
â”‚   â”œâ”€â”€ EVAL_SYSTEM_IMPLEMENTATION_SUMMARY.md
â”‚   â”œâ”€â”€ EVAL_REPORT_DESIGN.md
â”‚   â””â”€â”€ IMPLEMENTATION_COMPARISON.md       # æœ¬æ–‡æ¡£
â””â”€â”€ reports/
    â””â”€â”€ eval_history/
        â”œâ”€â”€ *.json                          # åŽ†å²æ•°æ®æ–‡ä»¶
        â”œâ”€â”€ plots/                          # è¶‹åŠ¿å›¾
        â””â”€â”€ report/                         # HTML æŠ¥å‘Š
            â””â”€â”€ assets/
                â””â”€â”€ chart.min.js            # Chart.js æœ¬åœ°å¤‡ä»½
```

### 5å±‚æ•°æ®ä¿ç•™ç­–ç•¥è¯¦ç»†è¯´æ˜Ž

```python
# scripts/manage_eval_retention.py ä¸­çš„å®žé™…å®žçŽ°
RetentionPolicy.TIERS = [
    # å±‚çº§ 1ï¼šå…¨é‡ä¿ç•™æœŸ
    {"name": "full", "days": 7, "keep": "all"},

    # å±‚çº§ 2ï¼šæ—¥å¿«ç…§æœŸ
    {"name": "daily", "days": 30, "keep": "daily"},

    # å±‚çº§ 3ï¼šå‘¨å¿«ç…§æœŸ
    {"name": "weekly", "days": 90, "keep": "weekly"},

    # å±‚çº§ 4ï¼šæœˆå¿«ç…§æœŸ
    {"name": "monthly", "days": 365, "keep": "monthly"},

    # å±‚çº§ 5ï¼šå­£åº¦æ°¸ä¹…ä¿ç•™
    {"name": "quarterly", "days": float('inf'), "keep": "quarterly"}
]
```

**é€‰æ‹©é€»è¾‘**ï¼š
1. æŒ‰åˆ†æ”¯å’Œç±»åž‹åˆ†ç»„
2. æ¯ä¸ªæ—¶é—´æ®µä¿ç•™æœ€æ–°çš„ä¸€ä»½
3. æ”¯æŒå½’æ¡£åŽåˆ é™¤

### Makefile å‘½ä»¤å¢žå¼ºè¯´æ˜Ž

```makefile
# åŽŸå§‹æ³¨é‡Šï¼ˆä¸å¤Ÿè¯¦ç»†ï¼‰
eval-retention: ## æŸ¥çœ‹æ•°æ®ä¿ç•™ç­–ç•¥çŠ¶æ€ï¼ˆå¹²è¿è¡Œï¼‰

# å¢žå¼ºåŽæ³¨é‡Šï¼ˆåŒ…å«5å±‚æ˜Žç»†ï¼‰
eval-retention: ## æŸ¥çœ‹æ•°æ®ä¿ç•™ç­–ç•¥çŠ¶æ€ï¼ˆ5å±‚ï¼š7då…¨é‡/30dæ—¥å¿«ç…§/90då‘¨å¿«ç…§/365dæœˆå¿«ç…§/æ°¸ä¹…å­£åº¦å¿«ç…§ï¼‰

eval-retention-apply: ## åº”ç”¨5å±‚æ•°æ®ä¿ç•™ç­–ç•¥ï¼ˆåˆ é™¤å†—ä½™åŽ†å²ï¼Œéœ€è¦ç¡®è®¤ï¼‰
```

---

## ðŸ”§ åŽç»­ä¼˜åŒ–å»ºè®®

### 1. ç«‹å³å¯æ‰§è¡Œ

- [x] æ›´æ–° Makefile æ³¨é‡Šä»¥åŒ…å«5å±‚ç­–ç•¥è¯´æ˜Ž
- [x] åœ¨æ–‡æ¡£ä¸­æ·»åŠ ç‰ˆæœ¬å…¼å®¹æ€§ç« èŠ‚
- [x] è¡¥å……ä¿ç•™ç­–ç•¥çš„è¯¦ç»†ç®—æ³•è¯´æ˜Ž

### 2. è¿‘æœŸæ”¹è¿›ï¼ˆ1-2å‘¨ï¼‰

- [ ] æ·»åŠ  `make chart-update` å‘½ä»¤è‡ªåŠ¨ä¸‹è½½/æ›´æ–° Chart.js
- [ ] åˆ›å»º `scripts/setup.sh` ä¸€é”®é…ç½®çŽ¯å¢ƒå˜é‡
- [ ] æ·»åŠ ä¿ç•™ç­–ç•¥çš„å¯è§†åŒ–æŠ¥å‘Š

### 3. ä¸­æœŸå¢žå¼ºï¼ˆ1ä¸ªæœˆï¼‰

- [ ] æ”¯æŒè‡ªå®šä¹‰ä¿ç•™ç­–ç•¥é…ç½®æ–‡ä»¶ (retention.yaml)
- [ ] æ·»åŠ æ•°æ®å¯¼å‡ºåŠŸèƒ½ï¼ˆCSV/Excelï¼‰
- [ ] å®žçŽ° Prometheus metrics å¯¼å‡º

---

## ðŸ“ˆ ç‰ˆæœ¬å…¼å®¹æ€§ä¿è¯

### Chart.js ç‰ˆæœ¬é”å®š

```javascript
// é”å®šç‰ˆæœ¬é¿å…ç ´åæ€§æ›´æ–°
const CHART_JS_VERSION = "4.4.0";
const CHART_JS_CDN = `https://cdn.jsdelivr.net/npm/chart.js@${CHART_JS_VERSION}/dist/chart.umd.min.js`;
const CHART_JS_LOCAL = "reports/eval_history/report/assets/chart.min.js";

// ä¸‰å±‚å›žé€€æœºåˆ¶
1. CDN with integrity check (SHA-384)
2. Local backup file
3. Static PNG fallback
```

### Python ä¾èµ–ç®¡ç†

```txt
# requirements.txt ä¸­åº”æ·»åŠ 
matplotlib>=3.5.0,<4.0.0  # é”å®šä¸»ç‰ˆæœ¬
pandas>=1.3.0,<2.0.0      # é¿å… 2.0 ç ´åæ€§æ›´æ–°
```

---

## ðŸ“Š å®žæ–½æˆæžœç»Ÿè®¡

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜Ž |
|------|------|------|
| **æ–°å¢žä»£ç è¡Œæ•°** | 2,840+ | ä¸å«æ–‡æ¡£ |
| **æ–°å¢žæ–‡æ¡£è¡Œæ•°** | 1,200+ | å®Œæ•´æŒ‡å—å’Œè®¾è®¡æ–‡æ¡£ |
| **Makefile æ–°å‘½ä»¤** | 8 | eval-* ç³»åˆ—å‘½ä»¤ |
| **æ”¯æŒçš„é€šçŸ¥æ¸ é“** | 3 | Slack, Email, GitHub |
| **ä¿ç•™ç­–ç•¥å±‚çº§** | 5 | ä»Ž7å¤©åˆ°æ°¸ä¹… |
| **Chart.js å›žé€€å±‚** | 3 | CDN â†’ æœ¬åœ° â†’ PNG |
| **Schema ç‰ˆæœ¬** | 1.0.0 | æ”¯æŒè‡ªåŠ¨è¿ç§» |

---

## âœ… è´¨é‡æ£€æŸ¥æ¸…å•

- [x] Workflow æ–‡ä»¶ä½äºŽæ­£ç¡®çš„ `.github/workflows/` ç›®å½•
- [x] 5å±‚ä¿ç•™ç­–ç•¥åœ¨æ–‡æ¡£ä¸­æœ‰è¯¦ç»†è¯´æ˜Žå’Œç¤ºä¾‹
- [x] Chart.js ç‰ˆæœ¬é”å®šå¹¶æœ‰æœ¬åœ°å¤‡ä»½è·¯å¾„
- [x] Makefile æ³¨é‡ŠåŒ…å«å®Œæ•´çš„åŠŸèƒ½è¯´æ˜Ž
- [x] æ‰€æœ‰è„šæœ¬æ”¯æŒ `--dry-run` å®‰å…¨æ¨¡å¼
- [x] çŽ¯å¢ƒå˜é‡æœ‰å®Œæ•´çš„é…ç½®ç¤ºä¾‹
- [x] CI/CD é›†æˆåŒ…å«æ‰€æœ‰å¿…è¦çš„ secrets é…ç½®

---

## ðŸŽ¯ æ€»ç»“

ç»è¿‡ä¿®æ­£ï¼Œç³»ç»ŸçŽ°åœ¨å…·æœ‰ï¼š

1. **å‡†ç¡®çš„æ–‡ä»¶ç»“æž„**ï¼šæ‰€æœ‰æ–‡ä»¶éƒ½åœ¨æ­£ç¡®ä½ç½®
2. **è¯¦ç»†çš„ç­–ç•¥è¯´æ˜Ž**ï¼š5å±‚ä¿ç•™ç­–ç•¥æœ‰å®Œæ•´æ–‡æ¡£
3. **ç‰ˆæœ¬å…¼å®¹æ€§ä¿è¯**ï¼šé”å®šå…³é”®ä¾èµ–ç‰ˆæœ¬
4. **æ¸…æ™°çš„é…ç½®æŒ‡å¯¼**ï¼šåŒ…å«ç¤ºä¾‹å’Œæœ€ä½³å®žè·µ

ç³»ç»Ÿå·²è¾¾åˆ°**ç”Ÿäº§å°±ç»ª**çŠ¶æ€ï¼Œæ‰€æœ‰åŠŸèƒ½å‡å¯æ­£å¸¸ä½¿ç”¨ã€‚

---

## ðŸ“Ž å®¡è®¡è¿½è¸ª

### å…³é”®æäº¤åŽ†å²

| Commit SHA | æè¿° | ç›¸å…³åŠŸèƒ½ |
|------------|------|----------|
| [`031a204`](../../commit/031a204) | OCR Week1 MVP complete with Idempotency | åŸºçº¿ç³»ç»Ÿå®Œæˆ |
| [`98fcab4`](../../commit/98fcab4) | Vision Golden Stage B.1 complete | Vision æ¨¡å—å®Œæˆ |
| [`7dba388`](../../commit/7dba388) | æ·»åŠ æœºæ¢°è£…é…ç†è§£AIå®Œæ•´æ–¹æ¡ˆ | åŠŸèƒ½æ–‡æ¡£ |
| [`bc5a815`](../../commit/bc5a815) | æ·»åŠ å®Œæ•´çš„è§†è§‰è¯†åˆ«èƒ½åŠ›å¼€å‘æ–‡æ¡£ | æŠ€æœ¯æ–‡æ¡£ |

### è¯„ä¼°ç³»ç»Ÿå¼€å‘æ—¶é—´çº¿

1. **2025-11-17**: åˆå§‹è¯„ä¼°ç³»ç»Ÿå®žæ–½ (Phase 1 MVP)
2. **2025-11-18**: Schema v1.0.0 å’Œ CI é›†æˆ (Step 0-1)
3. **2025-11-19**: Phase 2-5 å®Œæ•´å®žæ–½ï¼ˆäº¤äº’å¼æŠ¥å‘Šã€ä¿ç•™ç­–ç•¥ã€é€šçŸ¥ç³»ç»Ÿï¼‰
4. **2025-11-19**: æ–‡æ¡£ä¿®æ­£å’Œå¾®ä¼˜åŒ–

---

*æ–‡æ¡£ç‰ˆæœ¬: 1.1.0 | æœ€åŽæ›´æ–°: 2025-11-19 | åŸºäºŽ commit: 031a204*