# Hybrid Classifier åŸºçº¿ç›˜ç‚¹æŠ¥å‘Š

**æ—¥æœŸ**: 2026-01-24
**åˆ†æ”¯**: `feat/hybrid-classifier-multimodal`
**çŠ¶æ€**: é˜¶æ®µ 0 å®Œæˆ

---

## 1. ç°æœ‰ç³»ç»ŸçŠ¶æ€

### 1.1 Graph2D æ¨¡å‹ä¿¡æ¯

| å±æ€§ | å€¼ |
|------|-----|
| æ¨¡å‹è·¯å¾„ | `models/graph2d_parts_upsampled_20260122.pth` |
| æ¨¡å‹ç±»å‹ | GCN / EdgeSage |
| èŠ‚ç‚¹ç‰¹å¾ç»´åº¦ | 20 (DXF_NODE_DIM) |
| è¾¹ç‰¹å¾ç»´åº¦ | 7 (DXF_EDGE_DIM) |
| æœ€å¤§èŠ‚ç‚¹æ•° | 50 (ç¡¬ç¼–ç æˆªæ–­) |

### 1.2 æ ‡ç­¾ä½“ç³»

| å±æ€§ | å€¼ |
|------|-----|
| åŒä¹‰è¯è¡¨è·¯å¾„ | `data/knowledge/label_synonyms_template.json` |
| æ ‡ç­¾ç±»åˆ«æ•° | 144 |
| å¹³å‡åˆ«åæ•° | ~2 ä¸ª/ç±»åˆ« |

### 1.3 å½“å‰æ€§èƒ½ï¼ˆ15æ ·æœ¬æµ‹è¯•é›†ï¼‰

| æŒ‡æ ‡ | å€¼ | è¯´æ˜ |
|------|-----|------|
| Top-1 å‡†ç¡®ç‡ | **0%** | 15/15 å…¨é”™ |
| ç½®ä¿¡åº¦å‡å€¼ | 0.1708 | æ— åŒºåˆ†åº¦ |
| ç½®ä¿¡åº¦èŒƒå›´ | 0.1702 ~ 0.1714 | æåº¦é›†ä¸­ |
| é¢„æµ‹åˆ†å¸ƒ | 100% "ä¼ åŠ¨ä»¶" | æ¨¡å‹å¡Œé™· |

---

## 2. é—®é¢˜è¯Šæ–­

### 2.1 æ¨¡å‹å¡Œé™·ç—‡çŠ¶

```
è§‚å¯Ÿç°è±¡ï¼š
â”œâ”€â”€ æ‰€æœ‰æ ·æœ¬é¢„æµ‹ä¸ºåŒä¸€ç±»åˆ« "ä¼ åŠ¨ä»¶"
â”œâ”€â”€ ç½®ä¿¡åº¦æåº¦é›†ä¸­ï¼Œæ–¹å·®æ¥è¿‘ 0
â”œâ”€â”€ ä¸éšæœºçŒœæµ‹ (1/144 â‰ˆ 0.7%) ç›¸æ¯”ï¼Œç½®ä¿¡åº¦ ~17% åé«˜
â””â”€â”€ è¯´æ˜æ¨¡å‹å­¦åˆ°äº†æŸç§åç½®ï¼Œä½†å¤±å»äº†åŒºåˆ†èƒ½åŠ›
```

### 2.2 æ ¹å› åˆ†æ

| é—®é¢˜ | å½±å“ | ä¼˜å…ˆçº§ |
|------|------|--------|
| åªçœ‹å‡ ä½•ï¼Œä¸çœ‹æ–‡æœ¬/æ–‡ä»¶å | ä¸¢å¤±æœ€å¼ºç›‘ç£ä¿¡å· | ğŸ”´ é«˜ |
| èŠ‚ç‚¹æˆªæ–­ (max=50) | å¤æ‚å›¾çº¸ä¿¡æ¯ä¸¢å¤± | ğŸŸ¡ ä¸­ |
| ç±»åˆ«ä¸å¹³è¡¡ | æ¨¡å‹åå‘å¤šæ•°ç±» | ğŸŸ¡ ä¸­ |
| æ— æ ‡é¢˜æ æ–‡æœ¬ç‰¹å¾ | ä¸¢å¤±è¯­ä¹‰ä¿¡æ¯ | ğŸŸ¢ ä½ |

---

## 3. éªŒæ”¶æ ‡å‡†

### 3.1 é˜¶æ®µç›®æ ‡

| é˜¶æ®µ | ä¸»è¦æ”¹è¿› | Top-1 ç›®æ ‡ | Macro-F1 ç›®æ ‡ |
|------|----------|-----------|---------------|
| 0 (åŸºçº¿) | - | 0% | 0 |
| 1 (æ–‡ä»¶å) | FilenameClassifier + Hybrid | â‰¥85% | â‰¥0.80 |
| 2 (é‡‡æ ·) | é‡è¦æ€§é‡‡æ · | â‰¥87% | â‰¥0.82 |
| 3 (å¹³è¡¡) | ç±»åˆ«æƒé‡/Focal | â‰¥88% | â‰¥0.84 |
| 4 (æ ‡é¢˜æ ) | æ–‡æœ¬ç‰¹å¾ | â‰¥90% | â‰¥0.86 |
| 5 (èåˆ) | å¤šæ¨¡æ€ | â‰¥93% | â‰¥0.90 |
| 6 (è’¸é¦) | çŸ¥è¯†è’¸é¦ | â‰¥95% | â‰¥0.92 |

### 3.2 Golden Test Set è¦æ±‚

```yaml
golden_test_set:
  total_samples: 50  # æœ€å°è§„æ¨¡
  categories:
    normal_filename: 30      # æ ‡å‡†æ ¼å¼æ–‡ä»¶å
    abnormal_filename: 10    # å¼‚å¸¸/æ— æ„ä¹‰æ–‡ä»¶å
    multi_part: 5            # å¤šé›¶ä»¶/æ‹¼è£…åœºæ™¯
    edge_cases: 5            # è¾¹ç•Œæƒ…å†µ

  evaluation_isolation:
    - æ¨ç†é˜¶æ®µï¼šæ–‡ä»¶åå¯ç”¨ä½œå…ˆéªŒ
    - æ¨¡å‹èƒ½åŠ›è¯„ä¼°ï¼šä¸èƒ½ç”¨æ–‡ä»¶åä½œæ ‡ç­¾
```

### 3.3 å›æ»šæœºåˆ¶

```bash
# Feature Flags (ç¯å¢ƒå˜é‡)
FILENAME_CLASSIFIER_ENABLED=true|false   # æ–‡ä»¶ååˆ†ç±»å™¨å¼€å…³
FILENAME_MIN_CONF=0.8                     # æ–‡ä»¶åæœ€ä½ç½®ä¿¡åº¦
FILENAME_FUSION_WEIGHT=0.7                # èåˆæƒé‡
TITLEBLOCK_ENABLED=true|false             # æ ‡é¢˜æ ç‰¹å¾å¼€å…³
HYBRID_CLASSIFIER_ENABLED=true|false      # æ··åˆåˆ†ç±»å™¨æ€»å¼€å…³
```

---

## 4. æ­£ç¡®æ ‡ç­¾åˆ†å¸ƒï¼ˆå¤æ ¸ç»“æœï¼‰

| æ ‡ç­¾ | æ•°é‡ | å æ¯” |
|------|------|------|
| äººå­” | 2 | 13.3% |
| å‡ºæ–™å‡¸ç¼˜ | 2 | 13.3% |
| æ•é›†å™¨ç»„ä»¶ | 2 | 13.3% |
| æ‹–è½®ç»„ä»¶ | 2 | 13.3% |
| è‡ªåŠ¨è¿›æ–™è£…ç½® | 2 | 13.3% |
| è°ƒèŠ‚èºæ “ | 2 | 13.3% |
| æ•é›†å£ | 2 | 13.3% |
| çœŸç©ºç»„ä»¶ | 1 | 6.7% |

---

## 5. æ‰§è¡Œè®¡åˆ’

### é˜¶æ®µ 1ï¼šFilenameClassifier + HybridClassifier

**ç›®æ ‡**: ç«‹å³è§æ•ˆï¼Œè§£å†³ 85%+ é—®é¢˜

**å®ç°å†…å®¹**:
1. `src/ml/filename_classifier.py` - æ–‡ä»¶ååˆ†ç±»å™¨
2. `src/ml/hybrid_classifier.py` - æ··åˆåˆ†ç±»å™¨
3. API è¾“å‡ºæ‰©å±•ï¼š`filename_prediction`, `fusion_decision`
4. æ‰¹é‡åˆ†æè„šæœ¬å¢åŠ åˆ—
5. å•å…ƒæµ‹è¯•
6. è®¾è®¡/éªŒè¯æ–‡æ¡£

**éªŒæ”¶æ ‡å‡†**:
- æ–‡ä»¶åè¦†ç›–ç‡ â‰¥ 80%
- Top-1 å‡†ç¡®ç‡ â‰¥ 85%
- é«˜ç½®ä¿¡åº¦(>0.8)å‡†ç¡®ç‡ â‰¥ 95%

---

## é™„å½•ï¼šç›¸å…³æ–‡ä»¶

- åŒä¹‰è¯è¡¨: `data/knowledge/label_synonyms_template.json`
- å¤æ ¸ç»“æœ: `reports/experiments/20260123/soft_override_reviewed_20260124.csv`
- å¤æ ¸è„šæœ¬: `scripts/review_soft_override_batch.py`
